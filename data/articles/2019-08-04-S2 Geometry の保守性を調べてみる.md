---
date: 2019-08-04
title: S2 Geometry の保守性を調べてみる
tags: [development,技術,S2 Geometry]
description: |-
  S2 Geometry のソースコードの保守状態を調査した。
  Pokemon Go が S2 Geometry ライブラリを用いて作られているという噂は本当なのか？
---

雑多な技術的なメモ・・・というか僕の嘆きなので、記事としてのまとまりはない。悪しからず。

2017年に[S2 Geometry](http://s2geometry.io/)が[リリース](https://opensource.googleblog.com/2017/12/announcing-s2-library-geometry-on-sphere.html)された。

去年（2018年）、このライブラリを試しに使用してみたところ、とてつもなく優秀で、それ以来大好きになった。この時の知見を活かして、どこかにデモアプリを設置したいと思っているが、中々着手できていないが・・・。

ただし、このライブラリに関して１つだけ疑問がある。
その疑問とは「ソースコードはちゃんと保守されているの？」というものだ。

というのも、リポジトリを見てみると不安になるのだ。
優秀なライブラリなので、オープンソースとして利用できる状態が続いて欲しいが、この先どうなることやら・・・。

## リポジトリ毎に保守状況を比較

今回、保守状況を

* ソースコードが定期的にアップデートされているかどうか？（Code frequency）
* 複数人がソースコードを保守しているか？（Contributors）

に着目し、評価することにした。

本ライブラリは、元々は[C++](https://github.com/google/s2geometry)で書かれた。
現在は、[Python](https://github.com/google/s2geometry/tree/master/src/python)、[Go](https://github.com/golang/geo)用のPortがある。
Java用のPortも存在しているが、2011年以降の保守がされていないので、対象から除外した。

調査の結論としては「ちゃんと保守されていくのかどうか、不安になる」であった。
Contributor が少ない。そして2019年のコミットが、C++、Go、共にほぼ無い。
この結論の根拠となるデータを以下に示す。

### C++(Python) (2019/08/04時点)

#### [Contributors](https://github.com/google/s2geometry/graphs/contributors)

コミット数が大きいのは[jmr(Jesse Rosenstock)](https://github.com/jmr)だけ。
その他のContributorは数コミット程度。

#### [Code frequency](https://github.com/google/s2geometry/graphs/code-frequency)

2017〜2018年はコミット数が大きいが、2019年はほとんどない。

### Go (2019/08/04時点)

#### [Contributors](https://github.com/golang/geo/graphs/contributors)

コミット数が大きいのは[rsned(Robert Snedegar)](https://github.com/rsned)。
その後ろに[dsymonds(David Symonds)](https://github.com/dsymonds)、[nes1983(Niko Schwarz)](https://github.com/nes1983)が続く。

#### [Code frequency](https://github.com/golang/geo/graphs/code-frequency)

2017〜2018年はコミット数が大きいが、2019年は5月に[コードのスタイル修正](https://github.com/golang/geo/pull/47)があったのみ。

## 本当にPokemon Goで使われているのか

そもそも「Pokemon GoがS2 Geometryを使用している」という情報が出回っているのだが、本当なんだろうか。
現状、全然保守されていないし、その情報の信憑性が疑われる。

Pokemon Goで使われているという、最も古い情報源はこちら。

* https://pokemongo.gamepress.gg/s2-cells-foundation-pokemon-go-design
* https://www.reddit.com/r/TheSilphRoad/comments/7o27g9/what_are_s2_cells_how_do_they_impact_the_game_and/

うーん。これらは公式の情報では無いので、イマイチ判断できない。
